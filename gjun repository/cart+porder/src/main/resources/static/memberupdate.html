<!DOCTYPE html> <!-- 正确的DOCTYPE声明 -->
<html>
<head>
<meta charset="utf-8">
<title>first html</title>

<script src="//ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

<style>
</style>
<link rel="stylesheet" href="headfoot.css">
</head>
<header>

</header>
<body padding:120px;>
   
    
        <p><img src="./images/user.png"  style="display:block; margin:auto;"><p>
 <div class="button-container"> 
   
    
      

    <form id="myForm"  class="needs-validation">
        <div class="form-group">
       
        <p class="textMed" >地址 Address</p>
        <input type="text"  name="address" id="address" value="taipei" required/><br/>
        <p class="textMed">電話 Mobile</p>
        <input type="text" name="mobile" id="mobile" value="0911555333" pattern="09\d{8}" required title="請輸入台灣手機號碼"/><br/>
        <p class="textMed">密碼 Password</p>
        <input type="password" name="password" id="password" value="m123" required/><br/>
       </div>
        <button type="submit" class="bt">修改</button></br>
        </br>
        <a href="regist.html">
        <button type="button"  id="registor"  class="bt">返回</button>
        <a>
       
     </div>   
    </form>
<div id="msg" style="text-align:center;font-size: 20px;"></div>

<script>

   


   function result(data,status){
       
        
        if(data=="success.html")
        window.location.href = "getmember.html";
        else
        //$("#msg").html(data);
        alert(data);
    }
    function prepare(evt){          
        evt.preventDefault();
          
        var obj={};
        obj.address=$("#address").val();
        obj.mobile=$("#mobile").val();
        obj.password=$("#password").val();
        $.ajax({
            url: 'http://localhost:8080/api/updatemember',
            type: 'post', 
            dataType: 'text',//從後端接收
            contentType: 'application/json',
            data: JSON.stringify(obj), // 将对象转换为JSON字符串
            success: result,
            error: function(myerror){
                console.log(myerror);
            }
        });
    }
    
    // 修改ID为"myForm"的选择器，从$("#myform") 改为 $("#myForm")
    $("#myForm").submit(prepare);



</script>

</body>
</html>